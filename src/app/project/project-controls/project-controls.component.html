<div class="project-controls__nav">
    <div class="p-grid p-nogutter p-p-3">
        <div class="p-col-6 p-d-flex p-ai-center">
            <i class="pi pi-chevron-left p-pr-2 project-controls__back-link" [routerLink]="['/project']"></i>
            <img src="/assets/stepflow-logo.svg" [routerLink]="['/project']" alt="Stepflow logo" height="26px" class="project-controls__back-link" />
            <div class="project-controls__divider p-mx-3"></div>
            <div class="ms-1 p-text-bold">{{ projectName }}</div>
        </div>
        <div class="p-col-6 p-d-flex p-jc-end p-ai-center">
            <i class="pi pi-cog ms-3 p-mr-3"></i>
            <p-button label="Share" icon="pi pi-users" class="p-mr-3" (click)="showShareDialog()"></p-button>
            <app-user-menu [showUsername]="false"></app-user-menu>
        </div>
    </div>
</div>

<p-dialog header='Share "{{ projectName }}"' [(visible)]="displayShareDialog" styleClass="dialog">
    <div class="p-mt-2 p-d-flex p-ai-center">
        <input type="text" pInputText placeholder="Email" class="p-mr-3" style="width: 100%;">
        <button type="button" pButton pRipple label="Share"></button>
    </div>
    <div class="ms-01 p-mt-3 p-text-uppercase">Shared with</div>
    <p-table [value]="projectUsers" styleClass="p-datatable-sm" [scrollable]="true" scrollHeight="150px">
        <ng-template pTemplate="colgroup">
            <colgroup>
                <col>
                <col>
                <col>
            </colgroup>
        </ng-template>
        <ng-template pTemplate="body" let-projectUser>
            <tr>
                <td style="width: 30%">{{projectUser.name}}</td>
                <td style="width: 50%">{{projectUser.email}}</td>
                <td class="p-d-flex p-jc-end" style="margin-bottom: -1px">
                    <p-dropdown [options]="roles" [(ngModel)]="selectedRole" optionLabel="name"></p-dropdown>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div class="ms-01 p-mt-3 p-text-uppercase">Sharable link</div>
    <p-messages [(value)]="linkCopiedMsg"></p-messages>
    <div class="p-inputgroup p-mt-2">
        <input type="text" pInputText value="{{parsedUrl}}" style="width: 100%;" #linkInput>
        <button type="button" pButton pRipple label="Copy Link" icon="pi pi-link" iconPos="left" (click)="copyInputMessage(linkInput)"></button>
    </div>
</p-dialog>
