<app-base-field [field]="field" [index]="index">
    <ng-container *ngIf="componentMode === 'view'">
        <div class="table">
            <p-table [resizableColumns]="true" [value]="tableValues.row" styleClass="p-datatable-gridlines">
                <ng-template pTemplate="header">
                    <tr>
                        <ng-container *ngFor="let row of tableValues.row">
                            <ng-container *ngFor="let col of row.item">
                                <th pResizableColumn *ngIf="col.isHeader">
                                    {{ col.text }}
                                </th>
                            </ng-container>
                        </ng-container>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-value>
                    <tr>
                        <ng-container *ngFor="let col of value.item">
                            <td *ngIf="!col.isHeader">
                                {{ col.text }}
                            </td>
                        </ng-container>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </ng-container>
    <ng-container *ngIf="componentMode === 'edit'">
        <div class="table">
            <p-table [resizableColumns]="true" [value]="tableValues.row" styleClass="p-datatable-gridlines">
                <ng-template pTemplate="header">
                    <tr pEditableRow>
                        <ng-container *ngFor="let row of tableValues.row">
                            <ng-container *ngFor="let col of row.item">
                                <th pEditableColumn pResizableColumn *ngIf="col.isHeader">
                                    <p-cellEditor>
                                        <ng-template pTemplate="input">
                                            <input pInputText type="text" [(ngModel)]="col.text" />
                                        </ng-template>
                                        <ng-template pTemplate="output">
                                            {{ col.text }}
                                        </ng-template>
                                    </p-cellEditor>
                                </th>
                            </ng-container>
                        </ng-container>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-value>
                    <tr>
                        <ng-container *ngFor="let col of value.item">
                            <td pEditableColumn *ngIf="!col.isHeader">
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="col.text" />
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{ col.text }}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                        </ng-container>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div>
            <button
                type="button"
                class="p-button-rounded"
                pButton
                icon="pi pi-plus"
                (click)="menuAdd.toggle($event)"
            ></button>
            <p-menu #menuAdd [popup]="true" [model]="menuAddItems" appendTo="body"></p-menu>
            <button
                type="button"
                class="p-button-rounded"
                pButton
                icon="pi pi-minus"
                (click)="menuRemove.toggle($event)"
            ></button>
            <p-menu #menuRemove [popup]="true" [model]="menuRemoveItems" appendTo="body"></p-menu>
        </div>
    </ng-container>
</app-base-field>
