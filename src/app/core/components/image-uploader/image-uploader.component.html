<app-base-field [field]="field" [index]="index">
    <ng-container *ngIf="componentMode === 'view'">
        <div class="images">
            <div *ngFor="let image of imageData; let index = index" class="images__item" key="index">
                <img
                    [src]="image.thumbnail"
                    [alt]="image.description"
                    style="cursor: pointer"
                    (click)="imageClick(index)"
                />
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="componentMode === 'edit'">
        <div class="images view p-p-2">
            <div *ngFor="let image of imageData; let index = index" class="images__item" key="index">
                <img
                    [src]="image.thumbnail"
                    [alt]="image.description"
                    style="cursor: pointer"
                    (click)="imageClick(index)"
                />
                <p-checkbox
                    name="deleteImage"
                    [value]="index"
                    (onChange)="onCheckboxPress($event, index)"
                    class="image-checkbox"
                ></p-checkbox>
            </div>
        </div>
        <p-toolbar>
            <div class="p-toolbar-group-left">
                <p-fileUpload
                    mode="basic"
                    accept="image/*"
                    maxFileSize="1000000"
                    chooseLabel="Upload images"
                    (onSelect)="onFileUploadSelected($event)"
                    class="p-mr-2"
                ></p-fileUpload>
                <button
                    pButton
                    styleClass="p-button-sm"
                    class="p-button-secondary"
                    type="button"
                    label="Delete images"
                    icon="pi pi-trash"
                    (click)="onDeleteImagePress(index)"
                    *ngIf="selectedImages.length > 0"
                ></button>
            </div>

            <div class="p-toolbar-group-right">{{ imageData.length }} images</div>
        </p-toolbar>
    </ng-container>
    <p-galleria
        [value]="imageData"
        [(visible)]="displayLightbox"
        [(activeIndex)]="activeIndex"
        [responsiveOptions]="responsiveOptions"
        [numVisible]="7"
        [circular]="true"
        [fullScreen]="true"
        [showItemNavigators]="true"
        [showThumbnails]="showThumbnails"
        [containerStyle]="{ width: '100%', height: '100%' }"
        [baseZIndex]="100000"
        class="gallery"
    >
        <ng-template pTemplate="header">
            <div class="p-py-4">
                <strong>
                    {{ field.label }}
                </strong>
            </div>
        </ng-template>
        <ng-template pTemplate="item" let-item>
            <img [src]="item.href" style="width: 100%; display: block;" class="gallery-image" />
        </ng-template>
        <ng-template pTemplate="thumbnail" let-item>
            <div class="p-grid p-nogutter p-justify-center gallery-thumbnail p-mr-1">
                <img [src]="item.href" style="display: block;" />
            </div>
        </ng-template>
        <ng-template pTemplate="footer" let-item>
            <div class="custom-galleria-footer">
                <button type="button" pButton icon="pi pi-list" (click)="onThumbnailButtonClick()"></button>
                <span *ngIf="imageData" class="meta-data">
                    <span class="title">{{ imageData[activeIndex].title }}</span>
                    <span>{{ imageData[activeIndex].description }}</span>
                </span>
                <span class="meta-data p-mr-2">
                    <span>{{ activeIndex + 1 }}/{{ imageData.length }}</span>
                </span>
                <!-- <button
                    type="button"
                    pButton
                    [icon]="fullScreenIcon()"
                    (click)="toggleFullScreen()"
                    class="fullscreen-button"
                ></button> -->
            </div>
        </ng-template>
    </p-galleria>
</app-base-field>
